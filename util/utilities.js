const INDEX_THRESHOLD=32767;let topics,index,messageBus;class InternalMessageBus{constructor(){topics={},index=0}subscribe(t,e,s=null){if(!t){console.error("Undefined subscription topic for callback: "),console.error(e);return}if("function"!=typeof e)throw console.error("Topic "+t+" encountered error with callback: "),console.log(e),"callback must be a function";topics.hasOwnProperty(t)||(topics[t]={});let i=index.toString();return topics[t][i]={callback:e,target:s},++index>32767&&console.warn(`WARNING: Subscriber threshold reached for topic ${t}!`),{unsubscribe:function(){delete topics[t][i]},topic:t}}publish(t,e=null){let s=[];if(topics.hasOwnProperty(t)){let i=topics[t],o=[];for(let r=1;r<arguments.length;r++)o.push(arguments[r]);for(let n in i)try{let h=i[n];h.callback.apply(h.target,o)}catch(a){s.push(a)}if(s.length>0)for(let l=0;l<s.length;l++)console.error(s[l])}}}messageBus=new InternalMessageBus;let soundList=[];function initializeSounds(t){globalVolume=sdkGetItem("globalVolume")||.9,globalMusicVol=sdkGetItem("globalMusicVol")||.9}function playSound(t,e=1,s=!1,i=!1){return soundList[t]||(soundList[t]=PhaserScene.sound.add(t)),soundList[t].fullVolume=e,soundList[t].volume=soundList[t].fullVolume*globalVolume,soundList[t].loop=s,soundList[t].isMusic=i,soundList[t].currTween&&(soundList[t].currTween.stop(),soundList[t].currTween=null),i&&(soundList[t].volume=e*globalMusicVol,globalMusic=soundList[t]),soundList[t].detune=0,soundList[t].pan=0,soundList[t].play(),soundList[t]}function playMusic(t,e=1,s=!1){return this.playSound(t,e,s,!0)}function playFakeBGMusic(t,e=1,s=!1){return soundList[t]||(soundList[t]=PhaserScene.sound.add(t)),globalTempMusic=soundList[t],soundList[t].fullVolume=e,soundList[t].volume=soundList[t].fullVolume*globalMusicVol,soundList[t].loop=s,soundList[t].currTween&&(soundList[t].currTween.stop(),soundList[t].currTween=null),soundList[t].isMusic=!0,soundList[t].play(),soundList[t]}function updateGlobalVolume(t=1){for(let e in globalVolume=t,sdkSetItem("globalVolume",t.toString()),soundList)soundList[e].isPlaying&&soundList[e]!==globalMusic&&(soundList[e].volume=soundList[e].fullVolume*globalVolume)}function updateGlobalMusicVolume(t=1){globalMusicVol=t,sdkSetItem("globalMusicVol",t.toString()),globalMusic&&(globalMusic.volume=globalMusic.fullVolume*t),globalTempMusic&&(globalTempMusic.volume=t)}function setVolume(t,e=0,s){let i=t.isMusic?globalMusicVol:globalVolume;t.fullVolume=e,s?PhaserScene.tweens.add({targets:t,volume:t.fullVolume*i,duration:s}):t.volume=t.fullVolume*i}function fadeAwaySound(t,e=650,s,i){t.fullVolume=0,t.currTween=PhaserScene.tweens.add({targets:t,volume:t.fullVolume,ease:s,duration:e,onComplete(){t.stop(),i&&i()}})}function fadeInSound(t,e=1,s=1e3){let i=t.isMusic?globalMusicVol:globalVolume;t.fullVolume=e;let o=t.fullVolume*i;return PhaserScene.tweens.add({delay:100,targets:t,volume:o,duration:s,ease:"Quad.easeIn"})}globalVolume=.9,globalMusicVol=.9,globalMusic=null,globalTempMusic=null;const NORMAL="normal",HOVER="hover",PRESS="press",DISABLE="disable";class Button{constructor(t){this.scene=t.scene||PhaserScene,this.state=NORMAL,this.normal=t.normal,this.hover=t.hover||t.normal,this.press=t.press||t.normal,this.disable=t.disable||t.normal,this.onMouseDownFunc=t.onMouseDown,this.onMouseUpFunc=t.onMouseUp,this.onDragFunc=t.onDrag,this.onHoverFunc=t.onHover||null,this.onHoverOutFunc=t.onHoverOut||null,this.onDropFunc=t.onDrop||null,this.cursorInteractive=t.cursorInteractive,this.destructibles=[],this.imageRefs={},this.oldImageRef=null,this.currImageRef=null,buttonManager.addToButtonList(this),this.handlePreload(),this.setState(NORMAL),this.isDraggable=t.isDraggable||!1,this.depth=0}setState(t){let e;switch(t){case NORMAL:e=this.normal;break;case HOVER:e=this.hover;break;case PRESS:e=this.press;break;case DISABLE:e=this.disable;break;default:console.error("Invalid state ",t);return}if(this.state=t,e.ref){this.oldImageRef=this.currImageRef,this.currImageRef=e.ref,this.imageRefs[this.oldImageRef]&&(this.imageRefs[this.oldImageRef].visible=!1);let s=this.imageRefs[e.ref];if(!s){s=e.atlas?this.scene.add.sprite(0,0,e.atlas,e.ref):this.scene.add.sprite(0,0,e.ref);let i=this.imageRefs[this.oldImageRef];i&&(s.setOrigin(i.originX,i.originY),s.scrollFactorX=i.scrollFactorX,s.scrollFactorY=i.scrollFactorY),s.setDepth(this.depth),this.imageRefs[e.ref]=s}this.forceInvis||(s.visible=!0)}else e.ref=this.normal.ref;let o=this.imageRefs[this.oldImageRef];o||(o=this.imageRefs[this.currImageRef]),void 0===e.x?this.imageRefs[e.ref].x=o.x||0:(this.imageRefs[e.ref].x=e.x,this.text&&(this.text.x=this.imageRefs[e.ref].x,this.text.offsetX&&(this.text.x+=this.text.offsetX))),void 0===e.y?this.imageRefs[e.ref].y=o.y||0:(this.imageRefs[e.ref].y=e.y,this.text&&(this.text.y=this.imageRefs[e.ref].y,this.text.offsetY&&(this.text.y+=this.text.offsetY))),void 0===e.alpha?this.imageRefs[e.ref].alpha=o.alpha||1:(this.imageRefs[e.ref].alpha=e.alpha,this.text&&(this.text.alpha=this.imageRefs[e.ref].alpha)),void 0===e.scaleX?this.imageRefs[e.ref].scaleX=o.scaleX||1:this.imageRefs[e.ref].scaleX=e.scaleX,void 0===e.scaleY?this.imageRefs[e.ref].scaleY=o.scaleY||1:this.imageRefs[e.ref].scaleY=e.scaleY,void 0!==e.origin&&this.setOrigin(origin.x,origin.y),void 0===e.tint?this.imageRefs[e.ref].setTint(o.tint):this.imageRefs[e.ref].setTint(e.tint),this.text&&(t===DISABLE?this.text.visible=!1:this.text.visible=!0)}setVisible(t=!0){for(let e in this.imageRefs)this.imageRefs[e].setVisible(t);!1===t?this.forceInvis=!0:this.forceInvis=!1}checkCoordOver(t,e){if(this.state===DISABLE)return!1;let s=void 0!==this.normal.scrollFactorX?this.normal.scrollFactorX:1,i=void 0!==this.normal.scrollFactorY?this.normal.scrollFactorY:1,o=t+PhaserScene.cameras.main.scrollX*s,r=e+PhaserScene.cameras.main.scrollY*i,n=this.imageRefs[this.currImageRef],h=n.width*Math.abs(n.scaleX),a=n.height*Math.abs(n.scaleY),l=n.x-n.originX*h,u=n.x+(1-n.originX)*h;if(o<l||o>u)return!1;let g=n.y-n.originY*a,c=n.y+(1-n.originY)*a;return!(r<g)&&!(r>c)}onHover(){this.state===NORMAL&&this.setState(HOVER),this.onHoverFunc&&this.onHoverFunc()}onHoverOut(){this.onHoverOutFunc&&this.onHoverOutFunc(),this.setState(NORMAL)}onMouseDown(t,e){if(this.state!==DISABLE&&(this.setState(PRESS),this.onMouseDownFunc&&this.onMouseDownFunc(t,e),this.isDraggable&&!this.isDragged)){this.setPos(gameVars.mouseposx+PhaserScene.cameras.main.scrollX,gameVars.mouseposy+PhaserScene.cameras.main.scrollY),this.isDragged=!0;let s=buttonManager.getDraggedObj();s&&s.onDrop&&s.onDrop().bind(),buttonManager.setDraggedObj(this)}}onDrag(t,e){this.onDragFunc&&this.onDragFunc(t,e)}clickMouseUp(){this.state!==DISABLE&&this.onMouseUpFunc&&this.onMouseUpFunc()}onMouseUp(t,e){this.state===PRESS&&(this.setState(HOVER),this.onMouseUpFunc&&this.onMouseUpFunc(t,e))}onDrop(t,e){this.isDragged=!1,buttonManager.setDraggedObj(),this.onDropFunc&&this.onDropFunc(t,e)}setDepth(t=0){for(let e in this.depth=t,this.text&&this.text.setDepth(t+1),this.imageRefs)this.imageRefs[e].setDepth(t)}setRotation(t){this.normal.rotation=t,this.hover.rotation=t,this.press.rotation=t,this.disable.rotation=t,this.text&&this.text.setRotation(t)}getPosX(){return this.getXPos()}getPosY(){return this.getYPos()}getScaleX(){return this.imageRefs[this.currImageRef].scaleX}getScaleY(){return this.imageRefs[this.currImageRef].scaleY}getXPos(){return this.normal.x}getYPos(){return this.normal.y}getWidth(){return this.imageRefs[this.currImageRef].width*this.imageRefs[this.currImageRef].scaleX}getHeight(){return this.imageRefs[this.currImageRef].height*this.imageRefs[this.currImageRef].scaleY}getState(){return this.state}getIsDragged(){return this.isDragged&&this.state!==DISABLE}getIsInteracted(){return this.state===HOVER||this.isDragged||this.state===PRESS}getIsHovered(){return this.state===HOVER}setOnMouseDownFunc(t){this.onMouseDownFunc=t}setOnMouseUpFunc(t){this.onMouseUpFunc=t}setOnHoverFunc(t){this.onHover=t}setOnHoverOutFunc(t){this.onHoverOutFunc=t}setNormalRef(t){this.normal.ref=t,this.state===NORMAL&&this.setState(NORMAL)}setHoverRef(t){this.hover.ref=t,this.state===HOVER&&this.setState(HOVER)}setHoverAlpha(t){this.hover.alpha=t}setPressRef(t){this.press.ref=t,this.state===PRESS&&this.setState(PRESS)}setDisableRef(t){this.disable.ref=t,this.state===DISABLE&&this.setState(DISABLE)}setAllRef(t){this.normal.ref=t,this.hover.ref=t,this.press.ref=t,this.disable.ref=t,this.setState(this.state)}setPos(t,e){if(void 0!==t)for(let s in this.normal.x=t,this.hover.x=t,this.press.x=t,this.disable.x=t,this.imageRefs)this.imageRefs[s].x=t;if(void 0!==e)for(let i in this.normal.y=e,this.hover.y=e,this.press.y=e,this.disable.y=e,this.imageRefs)this.imageRefs[i].y=e}setScrollFactor(t,e){if(void 0!==t)for(let s in this.normal.scrollFactorX=t,this.hover.scrollFactorX=t,this.press.scrollFactorX=t,this.disable.scrollFactorX=t,this.imageRefs)this.imageRefs[s].scrollFactorX=t;if(void 0!==e)for(let i in this.normal.scrollFactorY=e,this.hover.scrollFactorY=e,this.press.scrollFactorY=e,this.disable.scrollFactorY=e,this.imageRefs)this.imageRefs[i].scrollFactorY=e}setAlpha(t=1){for(let e in this.imageRefs)this.imageRefs[e].alpha=t}setScale(t,e){for(let s in void 0===e&&(e=t),this.imageRefs)this.imageRefs[s].scaleX=t,this.imageRefs[s].scaleY=e}bringToTop(){}setOrigin(t,e){for(let s in this.imageRefs)this.imageRefs[s].setOrigin(t,e);return this}addText(t,e){let s=this.normal.depth?this.normal.depth+1:1;return this.text=this.scene.add.text(this.normal.x,this.normal.y,t,e).setAlpha(this.normal.alpha).setOrigin(.5,.5).setDepth(s),this.text}setTextOffset(t,e){this.text.offsetX=t,this.text.offsetY=e,this.text.x=this.imageRefs[this.currImageRef].x+this.text.offsetX,this.text.y=this.imageRefs[this.currImageRef].y+this.text.offsetY}setStroke(t,e){this.text&&this.text.setStroke(t,e)}getText(){return this.text}setText(t){return this.text&&this.text.setText(t),this.text}tweenToPos(t,e,s,i,o){let r={targets:this.imageRefs[this.currImageRef],ease:i,duration:s,onUpdate:o,onComplete:()=>{this.setPos(t,e)}};void 0!==t&&(r.x=t),void 0!==e&&(r.y=e),this.scene.tweens.add(r)}tweenToScale(t,e,s,i,o,r){let n={targets:this.imageRefs[this.currImageRef],ease:i,duration:s,onUpdate:o,onComplete:()=>{this.setScale(t,e),r&&r()}};void 0!==t&&(n.scaleX=t),void 0!==e&&(n.scaleY=e),this.scene.tweens.add(n)}tweenToAlpha(t,e,s,i){let o={targets:this.imageRefs[this.currImageRef],ease:s,duration:e,alpha:t,onComplete:()=>{this.setAlpha(t),i&&i()}};this.scene.tweens.add(o)}handlePreload(){this.hover.preload&&this.setState(HOVER),this.press.preload&&this.setState(PRESS),this.disable.preload&&this.setState(DISABLE)}addToDestructibles(t){this.destructibles.push(t)}destroy(){if(!this.isDestroyed){if(this.isDestroyed=!0,this.destructibles.length>0)for(let t=0;t<this.destructibles.length;t++)this.destructibles[t].destroy();for(let e in this.destructibles=[],buttonManager.removeButton(this),this.text&&this.text.destroy(),this.imageRefs)this.imageRefs[e].destroy()}}}class InternalButtonManager{constructor(){this.buttonList=[],this.lastHovered=null,this.lastClickedButton=null,this.draggedObj=null,this.updateInterval=25,this.updateCounter=0,messageBus.subscribe("pointerUp",this.onPointerUp.bind(this)),messageBus.subscribe("pointerMove",this.onPointerMove.bind(this)),messageBus.subscribe("pointerDown",this.onPointerDown.bind(this))}update(t){let e=gameVars.mouseposx,s=gameVars.mouseposy,i=!1,o=null,r=null;for(let n=this.buttonList.length-1;n>=0;n--){let h=this.buttonList[n];if(h&&h.checkCoordOver(e,s)){this.lastHovered!==h&&(r=h),i=!0,o=h;break}}this.lastHovered&&this.lastHovered!==o&&"disable"!==this.lastHovered.getState()&&(this.lastHovered.setState("normal"),this.lastHovered.onHoverOut()),r&&r.onHover(),this.lastHovered=o}onPointerUp(t,e){let s=this.getLastClickedButton();s&&s.checkCoordOver(t,e)&&s.onMouseUp(t,e),this.draggedObj&&(this.draggedObj.onDrop&&this.draggedObj.onDrop(t,e),this.draggedObj=null)}onPointerMove(t,e){this.draggedObj&&(this.draggedObj.setPos(t,e),this.draggedObj.onDrag&&this.draggedObj.onDrag(t,e))}onPointerDown(t,e){for(let s=this.buttonList.length-1;s>=0;s--){let i=this.buttonList[s];if(i.checkCoordOver(t,e)){i.onMouseDown(t,e),this.lastClickedButton=i;break}}}addToButtonList(t){this.buttonList.push(t)}getLastClickedButton(){return this.lastClickedButton}removeButton(t){for(let e in this.buttonList)if(this.buttonList[e]===t){this.buttonList.splice(parseInt(e),1);break}}bringButtonToTop(t){this.removeButton(t),this.addToButtonList(t)}getDraggedObj(){return this.draggedObj}setDraggedObj(t=null){this.draggedObj=t}}buttonManager=new InternalButtonManager;let helperFunction={};helperFunction.runFunctionOverIntervals=function t(e,s=[],i=0){if(s.length>0){let o=s[0],r=o.delay+i;i=o.duration?o.duration:0,setTimeout(()=>{e(o),s.shift(),helperFunction.runFunctionOverIntervals(e,s,i)},r)}};class InternalHoverTextManager{constructor(t){PhaserScene=t||PhaserScene,this.hoverTextList=[],this.lastHovered=null,messageBus.subscribe("pointerMove",this.onPointerMove.bind(this)),messageBus.subscribe("pointerDown",this.onPointerDown.bind(this))}update(t){}onPointerMove(t,e){let s=gameVars.mouseposx,i=gameVars.mouseposy,o=null;for(let r=this.hoverTextList.length-1;r>=0;r--){let n=this.hoverTextList[r];if(n&&n.checkCoordOver(s,i)){o=n,this.lastHovered!==o&&o.onHover&&o.onHover();break}}this.lastHovered&&this.lastHovered!==o&&this.lastHovered.onHoverOut&&this.lastHovered.onHoverOut(),this.lastHovered=o}onPointerDown(t,e){this.onPointerMove(t,e)}addToHoverTextList(t){this.hoverTextList.push(t)}removeHoverText(t){for(let e in this.hoverTextList)if(this.hoverTextList[e]===t){this.hoverTextList.splice(parseInt(e),1);break}}}class HoverDisplay{constructor(t){this.hoverBacking=PhaserScene.add.sprite(-3,0,"pixels","semiblack_pixel.png"),this.hoverBacking.visible=!1,this.hoverBacking.setDepth(t.depth||9992),this.hoverTextDisplay=PhaserScene.add.text(0,0," ",{fontFamily:"robotomedium",fontSize:isMobile?20:19,color:"#FFFFBB",align:"left"}),this.hoverTextDisplay.visible=!1,this.hoverTextDisplay.setDepth(t.depth||9992),this.setOrigin(t.originX,t.originY),this.setPosition(t.x,t.y),this.hoverTextDisplay.setOrigin(t.originX,.5),this.stopAudioTemp=!0}addTween(t){this.currTween&&this.currTween.stop();let e={targets:[this.hoverBacking,this.hoverTextDisplay],duration:100};e={...e,...t},this.currTween=PhaserScene.tweens.add(e)}isMultiLine(){return this.hoverBacking.scaleY>20}setPosition(t,e){this.hoverBacking.x=t-3,this.hoverBacking.y=e,this.hoverTextDisplay.x=this.hoverBacking.x+3*(1-2*this.hoverBacking.originX-(this.hoverBacking.originX-.5)*4),this.hoverTextDisplay.y=this.hoverBacking.y-.5*this.hoverTextDisplay.height*(2*this.hoverBacking.originY-1)-3}setOrigin(t=.5,e=.5){this.hoverBacking.setOrigin(t,e),this.hoverTextDisplay.setOrigin(t,.5),0==t?this.hoverTextDisplay.setAlign("left"):1==t?this.hoverTextDisplay.setAlign("right"):this.hoverTextDisplay.setAlign("center")}getText(){return this.hoverTextDisplay.text}setAlign(t){this.hoverTextDisplay.setAlign(t)}stopNextAudio(){this.stopAudioTemp=!0}getStopNextAudio(){return!!this.stopAudioTemp&&(this.stopAudioTemp=!1,!0)}setText(t){this.hoverTextDisplay.text!==t&&(this.hoverTextDisplay.setText(t),"left"==gameOptions.infoBoxAlign?this.hoverTextDisplay.width>170?this.hoverTextDisplay.setFontSize(17):this.hoverTextDisplay.setFontSize(19):this.hoverTextDisplay.text.length>80?this.hoverTextDisplay.setFontSize(18):this.hoverTextDisplay.setFontSize(isMobile?20:19),this.hoverTextDisplay.x=this.hoverBacking.x+3*(1-2*this.hoverBacking.originX-(this.hoverBacking.originX-.5)*4),this.hoverTextDisplay.y=this.hoverBacking.y-.5*this.hoverTextDisplay.height*(2*this.hoverBacking.originY-1)-3,this.hoverBacking.setScale((this.hoverTextDisplay.width+13)*.5*this.hoverTextDisplay.scaleX+3,(this.hoverTextDisplay.height+4)*.5*this.hoverTextDisplay.scaleY),t.length>0?this.setVisible(!0):this.setVisible(!1))}setAlpha(t){this.hoverTextDisplay.alpha=t,this.hoverBacking.alpha=.85*t}setVisible(t){this.hoverTextDisplay.visible=t,this.hoverBacking.visible=t}}class HoverText{constructor(t){this.origin={},this.origin.x=t.origin?t.origin.x:.5,this.origin.y=t.origin?t.origin.y:.5,this.width=t.width,this.height=t.height,this.x=t.x-this.width*this.origin.x,this.y=t.y-this.height*this.origin.y,this.endX=t.x+this.width*(1-this.origin.x),this.endY=t.y+this.height*(1-this.origin.y),this.text=t.text||"...",this.onHover=t.onHover,this.onHoverOut=t.onHoverOut,this.displayX=t.displayX,this.displayY=t.displayY,this.originX=t.displayOrigin?t.displayOrigin.x:0,this.originY=t.displayOrigin?t.displayOrigin.y:0,globalObjects.hoverTextManager.addToHoverTextList(this),this.depth=0}checkCoordOver(t,e){return!(t<this.x)&&!(t>this.endX)&&!(e<this.y)&&!(e>this.endY)}getPosX(){return this.getXPos()}getPosY(){return this.getYPos()}getXPos(){return this.x}getYPos(){return this.y}getWidth(){return this.endX-this.x}getHeight(){return this.endY-this.y}setText(t){this.text=t}setPos(t,e){this.x=t,this.y=e,this.endX=this.x+this.width,this.endY=this.y+this.height}bringToTop(){console.log("TODO")}setOrigin(t,e){console.log("todo")}destroy(){this.isDestroyed||(this.isDestroyed=!0,globalObjects.hoverTextManager.removeHoverText(this))}}class InternalMouseManager{constructor(){}onPointerMove(t){gameVars.wasTouch=t.wasTouch||"touch"===t.pointerType;let e=mouseToHand(t.x,t.y,!0);gameVars.mouseposx=e.x,gameVars.mouseposy=e.y,messageBus.publish("pointerMove",e.x,e.y)}onPointerDown(t){gameVars.wasTouch=t.wasTouch,gameVars.mousedown=!0,gameVars.mouseJustDowned=!0;let e=mouseToHand(t.x,t.y);gameVars.mouseposx=e.x,gameVars.mouseposy=e.y,gameVars.lastmousedown.x=e.x,gameVars.lastmousedown.y=e.y,messageBus.publish("pointerDown",e.x,e.y)}onPointerDownAlt(t){let e=mouseToHand(t.x,t.y,!0);gameVars.wasTouch=t.wasTouch||void 0===t.wasTouch,gameVars.mousedown=!0,gameVars.mouseJustDowned=!0,gameVars.mouseposx=e.x,gameVars.mouseposy=e.y,gameVars.lastmousedown.x=e.x,gameVars.lastmousedown.y=e.y,messageBus.publish("pointerDown",e.x,e.y)}onPointerUpAlt(t){let e=mouseToHand(t.x,t.y,!0);gameVars.wasTouch=t.pointerType,gameVars.mousedown=!1,gameVars.mouseJustUpped=!0,messageBus.publish("pointerUp",e.x,e.y),gameVars.mouseposx=e.x,gameVars.mouseposy=e.y}}let mouseManager=new InternalMouseManager;function mouseToHand(t,e,s=!1){let i=t,o=e;s&&(i=(i-gameVars.canvasXOffset)/gameVars.gameScale,o=(o-gameVars.canvasYOffset)/gameVars.gameScale);let r=gameConsts.halfWidth/(gameConsts.halfWidth-0),n=gameConsts.halfHeight/(gameConsts.halfHeight-0),h=gameConsts.halfWidth+r*(i-gameConsts.halfWidth),a=gameConsts.halfHeight+n*(o-gameConsts.halfHeight);return{x:h=Math.min(Math.max(0,h),gameConsts.width-1),y:a=Math.min(Math.max(0,a),gameConsts.height-1)}}function setupMouseInteraction(t){let e=t.make.image({x:0,y:0,key:"whitePixel",add:!0,scale:{x:gameConsts.width,y:gameConsts.height},alpha:.001});e.setInteractive(),e.on("pointerdown",mouseManager.onPointerDown,t),globalObjects.input1=window[ajaxzig("b25wb2ludGVybW92ZQ==")]=t=>{mouseManager.onPointerMove(t)},globalObjects.input2=window[ajaxzig("bG9jYXRpb24=")],globalObjects.input3=window[ajaxzig("b25wb2ludGVydXA=")]=t=>{mouseManager.onPointerUpAlt(t)}}function resizeGame(){if(canResizeGame&&game&&game.canvas){var t=game.canvas,e=window.innerWidth,s=window.innerHeight,i=game.config.width/game.config.height,o=1;e/s<i?(t.style.width=e+"px",t.style.height=e/i+"px",o=e/game.config.width,gameVars.canvasXOffset=0,gameVars.canvasYOffset=(s-game.config.height*o)*.5):(t.style.width=s*i+"px",t.style.height=s+"px",o=s/game.config.height,gameVars.canvasYOffset=0,gameVars.canvasXOffset=(e-game.config.width*o)*.5),gameVars.gameScale=o}}class InternalPoolManager{constructor(){this.poolList={}}getItemFromPool(t){let e;return void 0==this.poolList[t]&&(this.poolList[t]=[]),this.poolList[t].length>0&&((e=this.poolList[t].pop()).visible=!0),e}returnItemToPool(t,e){void 0==this.poolList[e]&&(this.poolList[e]=[]),this.poolList[e].push(t),t.visible=!1}}let poolManager=new InternalPoolManager;function getTempPoolObject(t,e,s,i=250){let o=poolManager.getItemFromPool(s);o?o.setFrame(e).setAlpha(1).setVisible(!0).setRotation(0):o=PhaserScene.add.sprite(0,0,t,e);let r=gameVars.gameManualSlowSpeed||1;return PhaserScene.time.delayedCall(i/r,()=>{poolManager.returnItemToPool(o,s)}),o}var ajaxzig=function t(e){let s=[e];if(s.length>2)return s.length;let i=[];s[0];for(let o=0;o<s.length;o++){let r=0;r=1,i.push(atob(e)),i.push(r)}return i[0]},sha256=function t(e){function s(t,e){return t>>>e|t<<32-e}for(var i,o,r=Math.pow,n=r(2,32),h="length",a="",l=[],u=8*e[h],g=t.h=t.h||[],c=t.k=t.k||[],d=c[h],f={},p=2;64>d;p++)if(!f[p]){for(i=0;313>i;i+=p)f[i]=p;g[d]=r(p,.5)*n|0,c[d++]=r(p,1/3)*n|0}for(e+="\x80";e[h]%64-56;)e+="\0";for(i=0;i<e[h];i++){if((o=e.charCodeAt(i))>>8)return;l[i>>2]|=o<<(3-i)%4*8}for(l[l[h]]=u/n|0,l[l[h]]=u,o=0;o<l[h];){var m=l.slice(o,o+=16),v=g;for(g=g.slice(0,8),i=0;64>i;i++){var x=m[i-15],y=m[i-2],$=g[0],b=g[4],R=g[7]+(s(b,6)^s(b,11)^s(b,25))+(b&g[5]^~b&g[6])+c[i]+(m[i]=16>i?m[i]:m[i-16]+(s(x,7)^s(x,18)^x>>>3)+m[i-7]+(s(y,17)^s(y,19)^y>>>10)|0),D=(s($,2)^s($,13)^s($,22))+($&g[1]^$&g[2]^g[1]&g[2]);(g=[R+D|0].concat(g))[4]=g[4]+R|0}for(i=0;8>i;i++)g[i]=g[i]+v[i]|0}for(i=0;8>i;i++)for(o=3;o+1;o--){var T=g[i]>>8*o&255;a+=(16>T?0:"")+T.toString(16)}return a};class UpdateManager{constructor(){this.listOfFunctions=[]}update(t){for(let e=0;e<this.listOfFunctions.length;e++)this.listOfFunctions[e](t)}addFunction(t){for(let e=0;e<this.listOfFunctions.length;e++)if(t===this.listOfFunctions[e])return;return this.listOfFunctions.push(t),t}removeFunction(t){for(let e=0;e<this.listOfFunctions.length;e++)t===this.listOfFunctions[e]&&this.listOfFunctions.splice(e,1)}}let updateManager=new UpdateManager;
