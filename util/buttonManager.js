class InternalButtonManager{constructor(){this.buttonList=[],this.lastHovered=null,this.lastClickedButton=null,this.draggedObj=null,this.updateInterval=25,this.updateCounter=0,messageBus.subscribe("pointerUp",this.onPointerUp.bind(this)),messageBus.subscribe("pointerMove",this.onPointerMove.bind(this)),messageBus.subscribe("pointerDown",this.onPointerDown.bind(this))}update(t){let e=gameVars.mouseposx,o=gameVars.mouseposy,s=!1,i=null,n=null;for(let r=this.buttonList.length-1;r>=0;r--){let d=this.buttonList[r];if(d&&d.checkCoordOver(e,o)){this.lastHovered!==d&&(n=d),s=!0,i=d;break}}this.lastHovered&&this.lastHovered!==i&&"disable"!==this.lastHovered.getState()&&(this.lastHovered.setState("normal"),this.lastHovered.onHoverOut()),n&&n.onHover(),this.lastHovered=i}onPointerUp(t,e){let o=this.getLastClickedButton();o&&o.checkCoordOver(t,e)&&o.onMouseUp(t,e),this.draggedObj&&(this.draggedObj.onDrop&&this.draggedObj.onDrop(t,e),this.draggedObj=null)}onPointerMove(t,e){this.draggedObj&&(this.draggedObj.setPos(t,e),this.draggedObj.onDrag&&this.draggedObj.onDrag(t,e))}onPointerDown(t,e){for(let o=this.buttonList.length-1;o>=0;o--){let s=this.buttonList[o];if(s.checkCoordOver(t,e)){s.onMouseDown(t,e),this.lastClickedButton=s;break}}}addToButtonList(t){this.buttonList.push(t)}getLastClickedButton(){return this.lastClickedButton}removeButton(t){for(let e in this.buttonList)if(this.buttonList[e]===t){this.buttonList.splice(parseInt(e),1);break}}bringButtonToTop(t){this.removeButton(t),this.addToButtonList(t)}getDraggedObj(){return this.draggedObj}setDraggedObj(t=null){this.draggedObj=t}}buttonManager=new InternalButtonManager;
